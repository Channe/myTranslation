title: "Swift ç¼–ç¨‹æ€æƒ³ï¼Œç¬¬ä¸€éƒ¨åˆ†ï¼ˆè¡¥é—ï¼‰ï¼šç‰ºç‰²å°é©¬"
date: 2016-02-24
tags: []
categories: []
permalink:thinking-in-swift-1-addendum

---
åŸæ–‡é“¾æ¥=http://alisoftware.github.io/swift/2015/09/14/thinking-in-swift-1-addendum/
ä½œè€…=GABRIEL THEODOROPOULOS
åŸæ–‡æ—¥æœŸ=2015/12/14
è¯‘è€…=Channe
æ ¡å¯¹=
å®šç¨¿=
å‘å¸ƒæ—¶é—´=

<!--æ­¤å¤„å¼€å§‹æ­£æ–‡-->
åœ¨å‘è¡¨[æˆ‘çš„ç³»åˆ—æ–‡ç« ã€ŠSwift ç¼–ç¨‹æ€æƒ³ã€‹ç¬¬ä¸€éƒ¨åˆ†](http://swift.gg/2015/09/29/thinking-in-swift-1/)ä¹‹åï¼Œæˆ‘åœ¨Twitterä¸Šæ”¶åˆ°ä¸€äº›ä¸é”™çš„åé¦ˆã€‚ç°åœ¨ï¼Œæˆ‘åœ¨é‚£äº›è¯„è®ºçš„åŸºç¡€ä¸Šè°ˆä¸€è°ˆä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨*!*æ¥ç‰ºç‰²å°é©¬ã€‚

#ç»ä¸æ€æ­»å°é©¬å—ï¼Ÿ
åœ¨æˆ‘ä¸Šç¯‡æ–‡ç« é‡Œï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨`!`ã€‚æœ‰æ—¶å€™è¯»èµ·æ¥å¥½åƒæ˜¯â€œæ°¸è¿œä¸è¦ä½¿ç”¨å®ƒâ€ã€‚äº‹å®ä¸Šæˆ‘çš„æ„æ€æ˜¯ã€Šæ¯æ¬¡æ·»åŠ `!`ä¸èƒ½ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿ç¼–è¯‘å™¨ï¼Œè¿™æ ·æ˜¯åœ¨æ€æ­»å°é©¬ ğŸ´ã€‹ã€‚å¯æ˜¯å‘¢ï¼Œå¦‚æœä½ æ˜ç¡®çš„çŸ¥é“ä½ çš„ä»£ç åœ¨åšä»€ä¹ˆï¼Œé‚£å°é©¬ğŸ´ä¾æ—§èƒ½æ´»ä¸‹æ¥ã€‚ä¸è¦ä¸åŠ æ€ç´¢çš„è¿™æ ·åšï¼Œä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿ç¼–è¯‘å™¨ã€‚

#ä»€ä¹ˆæ—¶å€™ç‰ºç‰²å°é©¬ï¼Ÿ
è¿™é‡Œæœ‰å‡ ä¸ªåœ¨ Swift ä¸­å¯ä»¥ä½¿ç”¨`!`åœ°æ–¹çš„ä¾‹å­ã€‚å®ƒä»¬å¯èƒ½ä¸ä»…æ˜¯ä½¿ç”¨`!`çš„æ¡ˆä¾‹ï¼Œè€Œä¸”æˆ‘è§‰å¾—æ˜¯ç»å¤§éƒ¨åˆ†å°é©¬è§„åˆ™ä¾‹å¤–çš„åœ°æ–¹ã€‚

##1. IBOutlets + ä¾èµ–æ³¨å…¥
`IBOutlets` --- å’Œä½ åšçš„é‚£äº›ä¾èµ–æ³¨å…¥çš„å±æ€§ä¸€æ · --- æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¾‹å­ï¼Œå› ä¸ºå®ƒä»¬å°†ä¼šä¸€ç›´æ˜¯nilåœ¨initæ–¹æ³•ç»“æŸæ—¶ï¼ˆå› ä¸ºå®ƒä»¬ä¸èƒ½é©¬ä¸Šè¢«åˆå§‹åŒ–ï¼‰ï¼Œä½†æ˜¯å®ƒä»¬åœ¨å®ä¾‹åˆå§‹åŒ–åå°†è¿…é€Ÿè·å¾—ä¸€ä¸ªå€¼ï¼ˆä¸ç®¡æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥è¿˜æ˜¯åŠ è½½XIBï¼‰ã€‚

æ‰€ä»¥å³ä¾¿å®ƒä»¬ä¸å¾—ä¸æ˜¯å¯é€‰çš„ï¼ˆå› ä¸ºå®ƒä»¬åœ¨initè¿‡ç¨‹ä¸­ä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œä»…ä»…æ˜¯åœ¨é‚£ä¸€å°ä¼šä¹‹åï¼‰ï¼Œåœ¨è®¾è®¡ä¸Šï¼Œèƒ½ååˆ†è‚¯å®šï¼Œå®ƒä»¬åœ¨ä»£ç çš„å…¶ä»–éƒ¨åˆ†ç»ä¸ä¼šæ˜¯nilã€‚è¿™æ˜¯ä¸€ä¸ªéšå«çš„ä¾‹å­--è§£åŒ…å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºçŸ¥é“å®ƒä»¬ç»ä¸ä¼šåœ¨ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™ä¸ºnilã€‚

##2. UIImageï¼ŒUIStoryboardï¼ŒUITableViewCell
ä¸‹é¢çš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨åç§°å’Œæ ‡è¯†ç¬¦è¿™äº›å¸¸é‡æ¥åˆå§‹åŒ–çš„ï¼š
```swift
UIImage(named:...)
UIStoryboard(name:,bundle:)
UIStoryboard.instantiateViewControllerWithIdentifier(_:)
UITableView.dequeueReusableCellWithIdentifier(_:, forIndexPath:)
// and some other similar stuff...
```
è¿™é‡Œé¢çš„æ¯ä¸ªä¾‹å­ï¼Œå¦‚æœå§“åæˆ–æ ‡è¯†ç¬¦æ‹¼å†™é”™è¯¯éƒ½ä¼šå¯¼è‡´ä»£ç å´©æºƒï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¼€å‘é”™è¯¯ï¼ˆç”±äºbundleä¸­ç¼ºå¤±å›¾ç‰‡ï¼Œæˆ–è€…targetä¸­é”™è¯¯åŒ…å«storyboardå¯¼è‡´çš„ï¼‰ï¼Œä¹Ÿè®¸å¸Œæœ›åœ¨å¼€å‘æ—¶èƒ½å¤Ÿå°½å¯èƒ½æ—©çš„å‘ç°è¿™äº›é”™è¯¯ã€‚
æ³¨æ„è¿™äº›ä¾‹å­ï¼Œæœ‰äº›æƒ…å†µæ›´æ„¿æ„ä½¿ç”¨guard let else fatalError()æ¨¡å¼ï¼Œè¿™èƒ½åœ¨å¼€å‘æ—¶è§¦å‘é”™è¯¯åæä¾›æ›´ç²¾ç¡®çš„å¼‚å¸¸æ¶ˆæ¯ï¼š
```swift
guard let cell = tableView.dequeueReusableCellWithIdentifier("foo", forIndexPath:indexPath) as? MyCustomCell else {
  fatalError("cell with identifier 'foo' and class 'MyCustomCell' not found. "
    + "Check that your XIB/Storyboard is configured properly.")
}
```
è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¼šå¸Œæœ›ä½¿ç”¨ä¸€äº›å°æŠ€å·§ï¼Œæ¯”å¦‚æˆ‘åœ¨æ–‡ç« ã€Š[enums as constants](http://alisoftware.github.io/swift/enum/constants/2015/07/19/enums-as-constants/)ã€‹ä¸­è®¨è®ºè¿‡çš„ï¼Œå’Œå°†å¸Œæœ›ä½¿ç”¨[SwiftGen](https://github.com/AliSoftware/SwiftGen)æ¥é¿å…å¯èƒ½çš„æ ‡è¯†ç¬¦æ‹¼å†™é”™è¯¯å’Œå´©æºƒã€‚
ä¾‹å¦‚[`SwiftGen`çš„å®ç°é‡Œå®é™…ä¸Šä½¿ç”¨äº†`UIImage(named: asset.rawValue)!`](https://github.com/AliSoftware/SwiftGen#generated-code)ï¼Œå› ä¸ºæšä¸¾æ˜¯é€šè¿‡SwiftGenå·¥å…·ç”Ÿæˆçš„ï¼Œå› è€Œå®ƒèƒ½ä¿è¯å›¾ç‰‡çš„åå­—åœ¨Assets Catalogä¸­å­˜åœ¨ -- æ‰€ä»¥åœ¨è®¾è®¡ä¸Šä¸ä¼šæ˜¯nilã€‚

#ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹è¯¥ç‰ºç‰²å°é©¬å—ï¼Ÿ
è¿™ä¸ªç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯é¢å‘é‚£äº›Swiftæ–°æ‰‹ï¼Œå› ä¸ºä»–ä»¬å€¾å‘äºæ‰€æœ‰æƒ…å†µä¸‹éƒ½å¼ºåˆ¶è§£åŒ…ï¼Œä»…ä»…æ˜¯å› ä¸ºXcodeå‘Šè¯‰ä»–ä»¬è¿™æ ·åšï¼Œæˆ–è€…æ˜¯å› ä¸ºä»–ä»¬çœŸçš„ä¸çŸ¥é“ä¸ºä»€ä¹ˆå¯é€‰ç±»å‹æ›´é€‚åˆä»–ä»¬ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸è¯´é‚£äº›å¯¹äºæˆ‘çš„ç›®æ ‡å…¬ä¼—æ¥è¯´æ„Ÿè§‰æ›´é«˜çº§çš„ä¾‹å­ã€‚

æ‰€ä»¥ï¼Œæœ‰çš„ä¾‹å­æœ‰ä½¿ç”¨`!`çš„æ„ä¹‰ã€‚ä½†æ˜¯ï¼Œæˆ‘åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­çš„å»ºè®®ä¾æ—§ä¿ç•™ï¼šä»…ä»…åœ¨çœŸçš„æ˜ç™½ä¸ºä»€ä¹ˆä½¿ç”¨`!`çš„æƒ…å†µä¸‹ä½¿ç”¨`!`ï¼ŒåŒæ—¶å…ˆè€ƒè™‘ï¼ŒåŒæ—¶ä¸èƒ½åªæ˜¯æ–¹ä¾¿ç¼–è¯‘å™¨ã€‚ç‰¹åˆ«åœ°ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªSwiftæ–°æ‰‹ï¼ŒåŒæ—¶ä½ æƒ³æ·»åŠ ä¸€ä¸ª`!`ä»…ä»…å› ä¸ºâ€œé‚£äº›è¯¥æ­»çš„å¯é€‰ç±»å‹å……æ»¡é”™è¯¯ï¼Œå¸Œæœ›ç¼–è¯‘å™¨èƒ½å¤Ÿåœæ­¢æŠ±æ€¨â€ï¼Œä½ å°±åšé”™äº†ï¼Œè¿™æ˜¯åœ¨å¼€å§‹æ€æ­»å°é©¬ä»¬ã€‚

åœ¨æœ¬ç³»åˆ—æ–‡ç« çš„æ¥ä¸‹æ¥çš„éƒ¨åˆ†å†è§ï¼Œæ¢è®¨mapï¼ŒflatMapï¼Œ??ï¼Œå¯é€‰é“¾ï¼Œä»¥åŠé¿å…æ•°æ®ä¸ä¸€è‡´ã€‚

> 1. åœ¨è¿™é‡Œæ’å…¥ä¸€ä¸ªâ€œå¼ºåˆ¶è§£ç»‘æ‰€æœ‰ä¸œè¥¿â€æ–‡åŒ– -- è¿™æ˜¯æˆ‘å¤ªèµ–äº†ä»¥è‡³äºä¸èƒ½åˆ›å»ºå’ŒåŒ…å«ã€‚
